<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>zhy</title>
<style>
  :root{
    --card-min-w:160px;
    --card-max-w:300px;
    --bg:#eef5f8;
    --card-radius:12px;
  }
  html,body{
    height:100%;margin:0;
    font-family:"Helvetica Neue",Arial,"PingFang SC","Microsoft YaHei",sans-serif;
    background: linear-gradient(180deg,#f2f8fc,#eef5f8 60%);
    overflow:hidden;
    position:relative;
  }

  /* æ°´å°å±‚æ ·å¼ */
  #watermark{
    position:fixed;
    inset:0;
    pointer-events:none;
    z-index:0;
    opacity:0.06;
    font-size:80px;
    color:#c7254e;
    font-weight:bold;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    white-space:pre-line;
    user-select:none;
    mix-blend-mode: multiply;
  }

  #stage{
    position:relative;
    width:100%;
    height:100vh;
    overflow:hidden;
    z-index:1;
  }

  .card{
    position:absolute;
    display:block;
    padding:12px 16px;
    box-sizing:border-box;
    border-radius:var(--card-radius);
    box-shadow:0 8px 20px rgba(20,30,50,0.12),0 2px 6px rgba(0,0,0,0.06);
    backdrop-filter: blur(2px);
    -webkit-backdrop-filter: blur(2px);
    transform-origin:center;
    opacity:0;
    transition: transform 900ms cubic-bezier(.2,.9,.2,1), opacity 900ms ease;
    color:#222;
    font-size:16px;
    line-height:1.4;
  }

  .bg-1{background:linear-gradient(120deg,#fff,#fffafa);}
  .bg-2{background:linear-gradient(120deg,#fff8ff,#fffdfb);}
  .bg-3{background:linear-gradient(120deg,#f9fff7,#f7fff8);}
  .bg-4{background:linear-gradient(120deg,#f6faff,#f8fbff);}

  .tag{font-size:12px;color:#ff6b81;margin-right:6px}
  .small-avatar{
    position:fixed;right:18px;bottom:18px;width:56px;height:56px;border-radius:50%;
    box-shadow:0 6px 18px rgba(0,0,0,0.12);
    background:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;
    z-index:3;
  }
  .controls{
    position:fixed;left:14px;bottom:18px;
    display:flex;gap:8px;align-items:center;
    z-index:3;
  }
  .btn{
    background:#fff;padding:8px 12px;border-radius:999px;
    box-shadow:0 6px 18px rgba(20,30,50,0.08);
    cursor:pointer;font-size:14px;border:0;
  }
  .credit{position:fixed;left:12px;top:12px;font-size:13px;color:#666;z-index:3}
  @keyframes floatUp {
    0%{transform:translateY(12px) scale(.98) rotate(0deg);opacity:0}
    60%{opacity:1}
    100%{transform:translateY(-6px) scale(1) rotate(var(--r));opacity:1}
  }
</style>
</head>
<body>
  <!-- ğŸŒ¸ èƒŒæ™¯æ°´å°å±‚ -->
  <div id="watermark">çˆ±ä½ å“Ÿï½ğŸ’—\næ¯å¤©éƒ½è¦å…ƒæ°”æ»¡æ»¡</div>

  <div id="stage" aria-hidden="true"></div>

  <div class="controls">
    <button id="toggleAudio" class="btn">ğŸ”ˆ æ’­æ”¾éŸ³ä¹</button>
    <button id="spawnOne" class="btn">â• å¼¹å‡ºä¸€æ¡</button>
    <button id="clearAll" class="btn">ğŸ§¹ æ¸…ç©ºå¡ç‰‡</button>
  </div>

  <div class="credit"></div>
  <div class="small-avatar" id="moreBtn" title="æ›´å¤š">ğŸ’Œ</div>

  <audio id="bgAudio" loop preload="auto">
    <source src="bg-music.flac" type="audio/flac">
  </audio>

<script>
/* é…ç½®åŒº */
const messages = [
  "æ¯å¤©éƒ½è¦å…ƒæ°”æ»¡æ»¡","ä¿æŒå¥½å¿ƒæƒ…","çæƒœæ¯ä¸€åˆ»",
  "åˆ«å¤ªç´¯å•¦ï¼Œå¶å°”å·æ‡’ä¹Ÿå¥½","æˆ‘æƒ³ä½ äº†","è®°å¾—åƒæ°´æœ",
  "è¦ç›¸ä¿¡è‡ªå·±å“¦","æœŸå¾…ä¸‹ä¸€æ¬¡è§é¢","ä¿æŒå¾®ç¬‘å‘€",
  "æ—©ç‚¹ä¼‘æ¯","å¤šå–æ°´å“¦~","æ„¿æ‰€æœ‰çƒ¦æ¼éƒ½æ¶ˆå¤±",
  "å¥½å¥½çˆ±è‡ªå·±","æ¢¦æƒ³æˆçœŸ","åˆ«ç†¬å¤œ","å¥½å¥½æŠ¤è‚¤",
  "ä½ è¶…æ£’çš„","ä»Šå¤©ä¹Ÿè¦å¼€å¿ƒå‘€","å¤©å†·äº†ï¼Œå¤šç©¿è¡£æœ"
];
const spawnIntervalRange=[200, 800],cardLife=22000;
const bgClasses=["bg-1","bg-2","bg-3","bg-4"];
const stage=document.getElementById('stage');
const audio=document.getElementById('bgAudio');
const toggleAudioBtn=document.getElementById('toggleAudio');
const spawnOneBtn=document.getElementById('spawnOne');
const clearAllBtn=document.getElementById('clearAll');
const moreBtn=document.getElementById('moreBtn');
let running=true,autoSpawnTimer=null;

function randInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}
function randChoice(a){return a[Math.floor(Math.random()*a.length)]}

function spawnCard(text){
  const card=document.createElement('div');
  card.className='card '+randChoice(bgClasses);
  const w=randInt(160,300);
  card.style.width=w+'px';
  const tag=document.createElement('span');
  tag.className='tag';tag.textContent = 'æç¤º ğŸ’—';
  const spanText=document.createElement('div');
  spanText.textContent=text;
  card.append(tag,spanText);
  const pad=20,maxX=Math.max(100,stage.clientWidth-w-pad),maxY=Math.max(100,stage.clientHeight-80);
  const left=randInt(pad,maxX),top=randInt(pad,maxY);
  card.style.left=left+'px';card.style.top=top+'px';
  const r=(Math.random()*18-9).toFixed(1)+'deg';
  card.style.setProperty('--r',r);
  stage.append(card);
  requestAnimationFrame(()=>{card.style.opacity='1';card.style.transform=`translateY(0) scale(1) rotate(${r})`;card.style.animation='floatUp 1100ms cubic-bezier(.2,.9,.2,1) forwards'});
  let lifeTimeout=setTimeout(()=>fadeOut(card),cardLife);
  card.onmouseenter=()=>{clearTimeout(lifeTimeout);card.style.transform=`scale(1.02) translateY(-6px) rotate(${r})`};
  card.onmouseleave=()=>{lifeTimeout=setTimeout(()=>fadeOut(card),3500);card.style.transform=`scale(1) translateY(0) rotate(${r})`};
  card.onclick=()=>fadeOut(card);
  function fadeOut(el){el.style.transition='opacity 700ms, transform 700ms';el.style.opacity='0';el.style.transform=`translateY(-8px) scale(.96) rotate(${r})`;setTimeout(()=>el.remove(),800)}
}
function scheduleNext(){if(!running)return;autoSpawnTimer=setTimeout(()=>{spawnCard(randChoice(messages));scheduleNext()},randInt(...spawnIntervalRange))}
toggleAudioBtn.onclick=()=>{if(audio.paused){audio.play().catch(()=>alert('æµè§ˆå™¨é™åˆ¶è‡ªåŠ¨æ’­æ”¾ï¼Œè¯·ç‚¹å‡»é¡µé¢åå†è¯•ã€‚'));toggleAudioBtn.textContent='ğŸ”Š æš‚åœéŸ³ä¹'}else{audio.pause();toggleAudioBtn.textContent='ğŸ”ˆ æ’­æ”¾éŸ³ä¹'}};
spawnOneBtn.onclick=()=>spawnCard(randChoice(messages));
clearAllBtn.onclick=()=>document.querySelectorAll('.card').forEach(c=>c.remove());
moreBtn.onclick=()=>{for(let i=0;i<6;i++)setTimeout(()=>spawnCard(randChoice(messages)),i*140)};
scheduleNext();
function tryPlayAudio() {
  audio.play().then(() => {
    toggleAudioBtn.textContent = 'ğŸ”Š æš‚åœéŸ³ä¹';
  }).catch(()=>{});
  document.removeEventListener('touchstart', tryPlayAudio);
}
document.addEventListener('touchstart', tryPlayAudio, { once: true });

</script>
</body>
</html>
